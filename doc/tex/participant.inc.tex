\chapter{Participants}\index{participant}
A particpant represents a legal client in an ECSA network.

\hypertarget{participant-basic-requirements}{}
\section{Basic functionalities and requirements}
\subsection{Technology / Architecture}\index{participant!technology}\index{participant!architecture}
\begin{itemize}
  \item has to communicate with the ECS as a
  \href{http://en.wikipedia.org/wiki/REST}{REST} client.
  \item \href{http://www.w3.org/Protocols/rfc2616/rfc2616.html}{HTTP 1.1} as
  transport and application protocol
  \item provide persistent connection (keep-alive)
  \item provide SSL/TLS transport layer
  \item has to use \href{http://en.wikipedia.org/wiki/UTF-8}{UTF-8} data
    encoding
\end{itemize}

\subsection{Authentication}\index{participant!authentication}
\begin{itemize}
  \item \href{http://en.wikipedia.org/wiki/Basic_access_authentication}{HTTP
  Basic auth}
  \item X.509 Certificates (SSL/TLS client authentication)
\end{itemize}

\subsection{Authorization}\index{participant!authorization}
  A client should be able to use a simple "one touch token"
  authorization through the ECS /authtokens ressource. This authorization
  should be used either in redirecting users clicking on course links or
  maybe used in accessing participants in interconnected ECS networks. 

\subsection{ECS REST interface}

\subsection{Ressource extensions / Alterations}\index{participant!ressource extensions}
To make resource extensions and alteration possible the clients have to
easily permit  
\begin{itemize}
  \item additional ressources
  \item extensible data formats
  \item Postels's Law (robustness principle):\begin{quote}Be conservative in what you send; be liberal in what you accept.\end{quote}
  \item versioning through request and response header (content negotiation)
  \begin{itemize}
    \item Accept: application/vnd.my-format.v1+json
    \item Accept: application/vnd.my-format.v2+json
  \end{itemize}
\end{itemize}

\subsection{Web interfaces}
\begin{itemize}
  \item Interface for ECS configuration data 
\end{itemize}

\hypertarget{parcomproc}{}
\section{Communication procedures / scenarios}\index{participant!communication}
In order to take part in an ECSA network a participant has to communicate with
the ECS and other participants in different ways.

\subsection{Retrieving resource representations indirectly}\index{participant!retrieving resources indirectly}\label{heading:participant_coursedata_retrieval_indirectly}
Figure \ref{fig:participant_coursedata_retrieval_indirectly} on page
\pageref{fig:participant_coursedata_retrieval_indirectly} shows the
communication procedure how a LMS retrieves a resource representation
(coursedata) indirectly through ECS. Indirect addressing takes place when the
ECS returns resource representations with  \hv{Content-Type: text/uri-list}
(\href{http://tools.ietf.org/html/rfc2483#section-5}{rfc2483}).
\begin{description}
  \item[1] First the LMS fetches (POST)  an event message from its event resource
  (\rs{/events/fifo}) of ECS , which gives it a new or updated course
  resource meta data URL on ECS. Supposing this would be \rs{/campusconnect/course/5}.
  \item[1.1] Now the LMS takes this URL and fetches (GET) it from ECS (the LMS
  only fetches the message via a GET, so that the message will still be there).
  Only now the LMS gets the real resource URL to fetch the desired course data
  from the proxy. This url maybe an encoded url like \ur{https://.../58680c636c8bc4a16e047d758f2e7773118fa141}
  \item[1.2] Next the LMS fetches (POST) a one touch token from the \rs{/auths}
  resource of ECS in case the proxy use it for authorization against ECS.
  \item[1.3] Then the LMS gets (GET) the actual course data from the proxy URL
  provided by the received message in 1.1 . 
  \item[1.4] Until it will get back the course resource representation in 1.3
  successfully, it deletes (DELETE) the message \rs{/campusconnect/course/5}
  received in 1.1 on ECS.
\end{description}
This procedure guarantiee that the appropriate course data will remain on the
proxy until the LMS has successfully fetched the data, because after the
message \rs{/campusconnect/course/5} has been deleted by the LMS the proxy
will be informed by the ECS, so that the real course data  could be deleted.
Of course this information occurs only if all addressed participants has
successfully fetched the message on the proxy and if the
\rs{/campusconnect/course} resource is not tagged as a postrouted resource. 
\begin{figure}[p]
\noindent \begin{centering}
\begin{SaveVerbatim}{EcsTxtGr}
                  +---------+                                  
                  |auths:ECS|                                  
                  +---------+                                  
                       |                                       
                       | ^                                     
                       | | 1.2:auth_repr:=post()               
                       |                                       
                       |   1.3:course_repr:=get(auth_repr.hash)
                       |    ---> 
                   +------+                 +----------+       
                   | :LMS |-----------------|data:Proxy|       
                   +------+                 +----------+       
                     |   |                                     
   1:event:=post() | |   |  | 1.1:meta_course_resource:=get()  
                   v |   |  v                                  
                     |   |                                     
                     |   |  | 1.4:delete()                     
                     |   |  v                                  
                     |   |                                     
      +---------------+ +----------------------------+         
      |events/fifo:ECS| | campusconnect/courses/5:ECS|         
      +---------------+ +----------------------------+         

\end{SaveVerbatim}
\ifdefstring{\doctype}{text}%
  {\UseVerbatim{EcsTxtGr}}%
  {\includegraphics{../diagrams/participant_course_retrieval_indirectly}}
\par\end{centering}
\caption[Indirect LMS coursedata
retrieval]{\label{fig:participant_coursedata_retrieval_indirectly}Indirect LMS
coursedata retrieval communication procedure.}
\end{figure}
